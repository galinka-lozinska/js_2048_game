{"version":3,"sources":["scripts/constants.js","scripts/helpers.js","scripts/move.js","scripts/handlers.js","scripts/main.js"],"names":["WIN_NUMBER","MAIN_CLASS_CELL","TURN_GRID","LEFT","FIRST","SECOND","RIGHT","UP","DOWN","module","exports","require","addStyleToField","fieldRow","i","length","j","newClass","cells","textContent","classList","remove","add","addRandomTwoOrFour","grid","pLose","option","getEmptyCells","randomPos","Math","round","random","rand","x","y","arrEmptyCells","push","resetField","trRow","renderField","trRows","finishedGame","gid","messageWin","maxNumber","max","rotateMatrix","count","N","k","temp","mergeNumbers","score","cell","parseFloat","document","querySelectorAll","gameScore","querySelector","messageLose","startGame","event","pWin","target","closest","pStart","contains","toggle","innerText","hidden","keyPressed","pressButtonStart","code","button","pressStart","gridOfNumber","addEventListener"],"mappings":"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","file":"main.7651fff1.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst WIN_NUMBER = 2048;\nconst MAIN_CLASS_CELL = 'field-cell';\n\nconst TURN_GRID = {\n  LEFT: {\n    FIRST: 3,\n    SECOND: 1,\n  },\n  RIGHT: {\n    FIRST: 1,\n    SECOND: 3,\n  },\n  UP: {\n    FIRST: 2,\n    SECOND: 2,\n  },\n  DOWN: {\n    FIRST: 0,\n    SECOND: 0,\n  },\n};\n\nmodule.exports = {\n  WIN_NUMBER,\n  MAIN_CLASS_CELL,\n  TURN_GRID,\n};\n","'use strict';\n\nconst {\n  WIN_NUMBER,\n  MAIN_CLASS_CELL,\n} = require('./constants');\n\nfunction addStyleToField(fieldRow) {\n  for (let i = 0; i < fieldRow.length; i++) {\n    for (let j = 0; j < fieldRow.length; j++) {\n      const newClass = `field-cell--${fieldRow[i].cells[j].textContent}`;\n\n      fieldRow[i].cells[j].classList.remove(...fieldRow[i].cells[j].classList);\n      fieldRow[i].cells[j].classList.add(MAIN_CLASS_CELL);\n\n      if (fieldRow[i].cells[j].textContent !== '') {\n        fieldRow[i].cells[j].classList.add(newClass);\n      }\n    }\n  }\n}\n\nfunction addRandomTwoOrFour(grid, pLose) {\n  const option = getEmptyCells(grid);\n\n  if (option.length === 0) {\n    pLose.classList.remove('hidden');\n\n    return;\n  }\n\n  const randomPos = Math.round(Math.random() * (option.length - 1));\n  const rand = Math.random(1);\n\n  grid[option[randomPos].x][option[randomPos].y] = rand > 0.1 ? 2 : 4;\n}\n\nfunction getEmptyCells(grid) {\n  const arrEmptyCells = [];\n\n  for (let i = 0; i < grid.length; i++) {\n    for (let j = 0; j < grid.length; j++) {\n      if (grid[i][j] === 0) {\n        arrEmptyCells.push({\n          x: i,\n          y: j,\n        });\n      }\n    }\n  }\n\n  return arrEmptyCells;\n}\n\nfunction resetField(grid, trRow) {\n  for (let i = 0; i < trRow.length; i++) {\n    for (let j = 0; j < trRow.length; j++) {\n      grid[i][j] = 0;\n      trRow[i].cells[j].textContent = '';\n    }\n  }\n}\n\nfunction renderField(grid, trRows) {\n  for (let i = 0; i < grid.length; i++) {\n    for (let j = 0; j < grid.length; j++) {\n      if (grid[i][j] !== 0) {\n        trRows[i].cells[j].textContent = `${grid[i][j]}`;\n      } else {\n        trRows[i].cells[j].textContent = '';\n      }\n    }\n  }\n}\n\nfunction finishedGame(gid, messageWin) {\n  const maxNumber = [];\n\n  for (let i = 0; i < gid.length; i++) {\n    maxNumber.push(Math.max(...gid[i]));\n  }\n\n  if (Math.max(...maxNumber) === WIN_NUMBER) {\n    messageWin.classList.remove('hidden');\n  }\n}\n\nmodule.exports = {\n  addRandomTwoOrFour,\n  resetField,\n  finishedGame,\n  addStyleToField,\n  renderField,\n};\n","'use strict';\n\nfunction rotateMatrix(grid, count) {\n  const N = grid.length;\n\n  for (let k = 0; k < count; k++) {\n    for (let i = 0; i < grid.length / 2; i++) {\n      for (let j = i; j < N - i - 1; j++) {\n        const temp = grid[N - 1 - j][i];\n\n        grid[N - 1 - j][i] = grid[N - 1 - i][N - 1 - j];\n        grid[N - 1 - i][N - 1 - j] = grid[j][N - 1 - i];\n        grid[j][N - 1 - i] = grid[i][j];\n        grid[i][j] = temp;\n      }\n    }\n  }\n}\n\nfunction mergeNumbers(grid, score) {\n  for (let i = 0; i < grid.length; i++) {\n    for (let j = grid.length - 1; j >= 0; j--) {\n      if (grid[j][i]) {\n        let cell = j;\n\n        while (cell < grid.length - 1) {\n          if (!grid[cell + 1][i]) {\n            grid[cell + 1][i] = grid[cell][i];\n            grid[cell][i] = 0;\n            cell++;\n          } else {\n            if (grid[cell + 1][i] === grid[cell][i]) {\n              grid[cell + 1][i] *= 2;\n\n              score.textContent\n                = `${parseFloat(score.textContent) + grid[cell + 1][i]}`;\n\n              grid[cell][i] = 0;\n              break;\n            } else {\n              break;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  mergeNumbers,\n  rotateMatrix,\n};\n","'use strict';\n\nconst {\n  addRandomTwoOrFour,\n  resetField,\n  finishedGame,\n  addStyleToField,\n  renderField,\n} = require('./helpers');\nconst {\n  mergeNumbers,\n  rotateMatrix,\n} = require('./move');\nconst {\n  TURN_GRID,\n} = require('./constants');\n\nconst fieldRow = document.querySelectorAll('.field-row');\nconst gameScore = document.querySelector('.game-score');\nconst messageWin = document.querySelector('.message-win');\nconst messageLose = document.querySelector('.message-lose');\n\nfunction startGame(event, grid, trRows, pLose, pWin, score) {\n  const target = event.target.closest('.button');\n  const pStart = document.querySelector('.message-start');\n\n  if (target.classList.contains('start')) {\n    target.classList.toggle('start', false);\n    target.classList.add('restart');\n    target.innerText = 'Restart';\n\n    pStart.hidden = true;\n  } else {\n    resetField(grid, trRows);\n    score.textContent = '0';\n\n    if (pWin.classList.length < 3) {\n      pWin.classList.add('hidden');\n    }\n\n    if (pLose.classList.length < 3) {\n      pLose.classList.add('hidden');\n    }\n  }\n\n  addRandomTwoOrFour(grid, pLose);\n  addRandomTwoOrFour(grid, pLose);\n  renderField(grid, trRows);\n  addStyleToField(trRows);\n};\n\nfunction keyPressed(\n  event,\n  grid,\n  trRows,\n  pressButtonStart,\n  score,\n  pLose,\n  pWin) {\n  if (!pressButtonStart) {\n    return;\n  }\n\n  if ((event.code !== 'ArrowRight')\n  && (event.code !== 'ArrowLeft')\n  && (event.code !== 'ArrowDown')\n  && (event.code !== 'ArrowUp')) {\n    return;\n  }\n\n  switch (event.code) {\n    case 'ArrowRight':\n      rotateMatrix(grid, TURN_GRID.RIGHT.FIRST);\n      mergeNumbers(grid, score);\n      rotateMatrix(grid, TURN_GRID.RIGHT.SECOND);\n      break;\n    case 'ArrowLeft':\n      rotateMatrix(grid, TURN_GRID.LEFT.FIRST);\n      mergeNumbers(grid, score);\n      rotateMatrix(grid, TURN_GRID.LEFT.SECOND);\n      break;\n    case 'ArrowDown':\n      rotateMatrix(grid, TURN_GRID.DOWN.FIRST);\n      mergeNumbers(grid, score);\n      rotateMatrix(grid, TURN_GRID.DOWN.SECOND);\n      break;\n    case 'ArrowUp':\n      rotateMatrix(grid, TURN_GRID.UP.FIRST);\n      mergeNumbers(grid, score);\n      rotateMatrix(grid, TURN_GRID.UP.SECOND);\n      break;\n    default:\n      break;\n  }\n  addRandomTwoOrFour(grid, pLose);\n  renderField(grid, trRows);\n  addStyleToField(trRows);\n  finishedGame(grid, pWin);\n}\n\nmodule.exports = {\n  messageWin,\n  messageLose,\n  fieldRow,\n  gameScore,\n  startGame,\n  keyPressed,\n};\n","'use strict';\n\nconst {\n  messageWin,\n  messageLose,\n  fieldRow,\n  gameScore,\n  startGame,\n  keyPressed,\n} = require('./handlers');\n\nconst button = document.querySelector('.button');\nlet pressStart = false;\n\nconst gridOfNumber = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nbutton.addEventListener('click', (event) => {\n  startGame(\n    event,\n    gridOfNumber,\n    fieldRow,\n    messageLose,\n    messageWin,\n    gameScore,\n  );\n  pressStart = true;\n});\n\ndocument.addEventListener('keyup', (event) =>\n  keyPressed(\n    event,\n    gridOfNumber,\n    fieldRow,\n    pressStart,\n    gameScore,\n    messageLose,\n    messageWin),\n);\n"]}